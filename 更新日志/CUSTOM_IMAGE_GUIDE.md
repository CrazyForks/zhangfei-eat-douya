# 文章自定义配图功能使用指南

## 功能简介

现在你可以为每篇文章单独设置配图！系统提供三种方式来自定义图片：
- 📁 **上传图片** - 从本地选择图片文件
- 📋 **剪贴板粘贴** - 直接粘贴截图或复制的图片
- 🔗 **图片URL** - 从网络链接加载图片

如果不单独设置，系统将使用默认的图片生成方式（API或本地图库）。

## 使用步骤

### 1. 打开图片设置

在写作页面，每个主题输入框后都有一个 **🖼️ 图片设置** 按钮：

```
┌─────────────────────────────────────────────────┐
│  标题 1                         [🖼️ 图片设置] [删除] │
└─────────────────────────────────────────────────┘
```

点击该按钮，会弹出图片设置窗口。

### 2. 选择图片来源

弹窗中有三个选项卡，选择你想要的方式：

#### 方式 1：上传图片

1. 切换到 **"上传图片"** 标签页
2. 点击 **"选择文件"** 按钮
3. 从电脑中选择图片文件
4. 预览显示后，点击 **"保存设置"**

**支持格式：** PNG, JPG, JPEG, GIF, WEBP, BMP

#### 方式 2：剪贴板粘贴

1. 切换到 **"粘贴图片"** 标签页
2. 点击粘贴区域使其获得焦点（区域会变成绿色）
3. 按 **Ctrl+V**（Windows）或 **Cmd+V**（Mac）粘贴图片
4. 预览显示后，点击 **"保存设置"**

**适用场景：**
- 使用截图工具（如 Snipping Tool, Snagit）截图后直接粘贴
- 从其他应用（如 Photoshop, 浏览器）复制图片后粘贴
- 从图片查看器复制图片后粘贴

#### 方式 3：图片URL

1. 切换到 **"图片URL"** 标签页
2. 在输入框中粘贴图片的完整URL地址
3. 点击 **"加载预览"** 按钮
4. 确认图片加载成功后，点击 **"保存设置"**

**示例URL：**
```
https://example.com/image.jpg
https://picsum.photos/800/600
```

**注意事项：**
- URL必须是直接指向图片文件的地址
- 需要确保URL可以公开访问
- 生成文章时会自动下载图片

### 3. 保存或清除设置

- **保存设置** - 保存当前选择的图片，按钮会变成蓝色，显示 **"🖼️ 已设置"**
- **清除图片** - 移除该主题的图片设置，恢复使用默认方式
- **取消** - 关闭窗口，不保存任何更改

### 4. 查看设置状态

保存图片后，该主题的按钮会显示：
```
[🖼️ 已设置 ●]  ← 绿色指示点表示已设置自定义图片
```

### 5. 生成文章

设置完图片后，正常点击 **"开始生成"** 按钮：
- 已设置图片的主题：使用你指定的图片
- 未设置图片的主题：使用系统默认的图片获取方式

## 使用场景示例

### 场景 1：为产品文章配专业图片

```
主题：新款智能手表评测

1. 点击 "图片设置"
2. 选择 "上传图片"
3. 上传手表的产品照片
4. 保存设置
5. 生成文章
```

结果：文章将使用你上传的专业产品照片，而不是系统自动搜索的图片。

### 场景 2：快速使用截图

```
主题：软件界面设计指南

1. 使用截图工具截取软件界面
2. 点击 "图片设置"
3. 切换到 "粘贴图片" 标签
4. 点击粘贴区域
5. 按 Ctrl+V 粘贴截图
6. 保存设置
```

结果：文章将使用你刚才截取的界面图。

### 场景 3：使用网络图片

```
主题：2024年设计趋势

1. 在网上找到合适的设计趋势图
2. 复制图片URL
3. 点击 "图片设置"
4. 切换到 "图片URL" 标签
5. 粘贴URL并加载预览
6. 保存设置
```

结果：系统会从URL下载图片并用于文章。

### 场景 4：混合使用

```
批量生成10篇文章：
- 前3篇：上传了精心挑选的图片
- 中间4篇：使用系统默认图片获取
- 后3篇：使用URL图片

只需为前3篇和后3篇设置图片即可！
```

## 优先级说明

图片获取的完整优先级（从高到低）：

1. **用户自定义图片**（本功能）
   - 如果为主题设置了图片，优先使用
   - 包括上传、粘贴、URL三种方式

2. **系统配置的图片源**
   - Unsplash API
   - Pexels API
   - Pixabay API
   - 本地图库

3. **降级兜底**
   - 如果所有方式都失败，文章中会显示 "请自行配图！！"

## 技术说明

### 图片存储

- **上传的图片** - 保存在 `uploads/` 目录
- **剪贴板图片** - 也保存在 `uploads/` 目录，文件名格式：`clipboard_时间戳.png`
- **URL图片** - 生成时临时下载，文档生成后删除

### 图片格式

所有方式都支持以下格式：
- PNG
- JPG / JPEG
- GIF
- WEBP
- BMP

### 文件大小

建议图片大小：
- 最佳：800x600 到 1920x1080
- 文件大小：建议小于5MB

过大的图片会增加上传时间和文档大小。

## 常见问题

### Q1: 图片上传失败怎么办？

**可能原因：**
- 文件格式不支持 → 确认是支持的图片格式
- 文件太大 → 尝试压缩图片
- 网络问题 → 检查网络连接

### Q2: 剪贴板粘贴没反应？

**解决方法：**
1. 确认已点击粘贴区域（区域应该变成绿色）
2. 确认剪贴板中确实有图片数据
3. 尝试重新复制图片
4. 使用浏览器的开发者工具检查是否有错误

### Q3: URL图片加载失败？

**检查清单：**
- [ ] URL是否正确（完整的http://或https://）
- [ ] URL是否直接指向图片文件
- [ ] 图片是否公开可访问（不需要登录）
- [ ] 网络连接是否正常

### Q4: 如何批量设置图片？

目前需要逐个主题设置。建议：
- 对重要文章使用自定义图片
- 一般文章使用系统默认图片获取
- 这样既保证了质量，又节省了时间

### Q5: 设置的图片会一直保存吗？

- **页面刷新** - 图片设置会丢失（需要重新设置）
- **生成后** - 已上传的图片保存在 `uploads/` 目录，可以重复使用
- **建议** - 设置好图片后尽快生成文章

### Q6: 可以为已生成的文章更换图片吗？

不可以。图片只能在生成前设置。如需更换：
1. 重新设置图片
2. 再次生成该主题的文章
3. 删除或替换旧文档

## 最佳实践

### 1. 提前准备图片

如果要批量生成文章：
- 提前收集好所有图片
- 统一命名（如：文章1.jpg, 文章2.jpg）
- 放在容易访问的文件夹

### 2. 使用高质量图片

- 分辨率：至少 800x600
- 清晰度：避免模糊或像素化
- 相关性：确保图片与主题相关

### 3. 善用不同方式

- **紧急截图** → 使用剪贴板粘贴
- **已有文件** → 使用上传图片
- **网络资源** → 使用URL（注意版权）

### 4. 版权注意

- 使用自己拍摄/制作的图片
- 使用免费图库（如 Unsplash, Pexels, Pixabay）
- 获得图片使用授权
- 注明图片来源（如需要）

## 快捷键

| 操作 | 快捷键 |
|------|--------|
| 粘贴图片 | Ctrl+V (Win) / Cmd+V (Mac) |
| 关闭弹窗 | ESC |
| 选择文件 | Ctrl+O (部分浏览器) |

## 更新日志

### v1.0.0（当前版本）
- ✨ 新增为每篇文章单独设置图片功能
- ✨ 支持上传、剪贴板、URL三种方式
- ✨ 实时预览图片
- ✨ 视觉指示器显示设置状态
- 🐛 修复图片格式验证问题

---

**需要帮助？**
- 查看主配置指南：`IMAGE_CONFIG_GUIDE.md`
- 查看快速开始：`QUICK_START_IMAGE.md`
- 技术实现详情：`IMPLEMENTATION_SUMMARY.md`
